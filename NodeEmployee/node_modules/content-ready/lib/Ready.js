// Generated by CoffeeScript 1.6.3
(function() {
  var $, Q, err;

  Q = require('q');

  try {
    $ = require('jquery');
  } catch (_error) {
    err = _error;
    $ = window.jQuery;
  }

  module.exports = function(el) {
    var counter, deferred, images, loaded;
    deferred = Q.defer();
    images = el.find('img');
    counter = images.length;
    if (counter === 0) {
      deferred.resolve(el);
    } else {
      loaded = function() {
        counter--;
        if (counter === 0) {
          return deferred.resolve(el);
        }
      };
      images.each(function(i, image) {
        if (image.complete) {
          return loaded();
        } else {
          return $(image).one('load', loaded);
        }
      });
    }
    return deferred.promise;
  };

}).call(this);
